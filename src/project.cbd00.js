window.__require=function t(e,o,n){function r(c,a){if(!o[c]){if(!e[c]){var l=c.split("/");if(l=l[l.length-1],!e[l]){var s="function"==typeof __require&&__require;if(!a&&s)return s(l,!0);if(i)return i(l,!0);throw new Error("Cannot find module '"+c+"'")}}var u=o[c]={exports:{}};e[c][0].call(u.exports,function(t){return r(e[c][1][t]||t)},u,u.exports,t,e,o,n)}return o[c].exports}for(var i="function"==typeof __require&&__require,c=0;c<n.length;c++)r(n[c]);return r}({AboutUIController:[function(t,e,o){"use strict";cc._RF.push(e,"d6f9dLc9QdHSpxVu2DaMFgA","AboutUIController"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,r=n.ccclass,i=(n.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onBackButtonClicked=function(t,e){cc.director.loadScene("main")},e=__decorate([r],e)}(cc.Component));o.default=i,cc._RF.pop()},{}],ChapterUIController:[function(t,e,o){"use strict";cc._RF.push(e,"a40a1rTmrNGCpaiWwD5Qfrd","ChapterUIController"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,r=n.ccclass,i=n.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.speakerLabel=null,e.textRegion=null,e.textLabel=null,e.commentLabel=null,e.commentLabel2=null,e.choice1Label=null,e.choice2Label=null,e.choice1Button=null,e.choice2Button=null,e.nextButton=null,e.prevButton=null,e.dialogNode=null,e.dialogLihui=null,e.dialogSpeaker=null,e.dialogLabel=null,e.sealNode=null,e.uiController=null,e}return __extends(e,t),Object.defineProperty(e.prototype,"totalPages",{get:function(){return Math.ceil(this.lines.length/12)},enumerable:!0,configurable:!0}),e.prototype.activate=function(t){console.debug("activate chapter UI"),this.node.active=!0,this.chose=!1,this.chapter=t,this.speakerLabel.string=t.speaker+"\u594f",this.lines=this.splitContent(t.text),this.pageID=0,this.choice1Label.string=t.option1,this.choice2Label.string=t.option2,this.commentLabel.string="",this.commentLabel2.string="",this.choice1Button.interactable=!0,this.choice2Button.interactable=!0,this.sealNode.active=!1,this.updateUI()},e.prototype.onButtonClicked=function(t,e){if(!this.chose){var o=parseInt(e);if(null===this.chapter.option||o===this.chapter.option){var n=0===o?this.chapter.feedback1:this.chapter.feedback2;n&&this.showDialog(n,!1);var r=0===o?this.chapter.option1:this.chapter.option2;this.commentLabel.string=r.substr(0,12),this.commentLabel2.string=r.substr(12,12),this.choice1Button.interactable=!1,this.choice2Button.interactable=!1,this.chose=!0,this.uiController.choose(o),this.updateUI()}else{var i=0===o?this.chapter.feedback1:this.chapter.feedback2;this.showDialog(i,!0)}}},e.prototype.onGlobalClicked=function(t,e){this.chose&&this.uiController.updateUI()},e.prototype.exit=function(){this.node.active=!1},e.prototype.splitContent=function(t){for(var e=[],o=0,n=t.split("\\n");o<n.length;o++){for(var r=n[o],i="<color=black>",c=!1,a=0,l=0;l<r.length;)"<color=red><b>"===r.substr(l,14)?(c=!0,l+=14):"</b></color>"===r.substr(l,12)?(c=!1,l+=12):(c&&(i+="<color=red><b>"),i+=r[l],c&&(i+="</b></color>"),a+=1,l+=1),16===a&&(e.push(i+"</color>"),i="\u3000<color=black>",a=1);e.push(i+"</color>")}return e},e.prototype.updateUI=function(){this.textRegion.removeAllChildren();for(var t=0;t<12;t+=1){var e=12*this.pageID+t;if(e>=this.lines.length)break;var o=cc.instantiate(this.textLabel.node);o.setParent(this.textRegion),o.setPosition(56*-t,0),o.getComponent(cc.RichText).string=this.lines[e]}var n=0===this.pageID,r=this.pageID+1===this.totalPages;this.choice1Button.node.active=r,this.choice2Button.node.active=r,this.nextButton.node.active=!r,this.prevButton.node.active=!n;var i=r&&this.chose;this.commentLabel.node.active=i,this.commentLabel2.node.active=i,this.sealNode.active=i},e.prototype.showDialog=function(t,e){this.dialogNode.active=!0,this.dialogLabel.string=t,this.dialogLihui.active=e,this.dialogSpeaker.active=e},e.prototype.onDialogClicked=function(t,e){this.dialogNode.active=!1},e.prototype.onNextPageClicked=function(t,e){this.pageID=Math.min(this.totalPages-1,this.pageID+1),this.updateUI()},e.prototype.onPrevPageClicked=function(t,e){this.pageID=Math.max(0,this.pageID-1),this.updateUI()},__decorate([i(cc.Label)],e.prototype,"speakerLabel",void 0),__decorate([i(cc.Node)],e.prototype,"textRegion",void 0),__decorate([i(cc.RichText)],e.prototype,"textLabel",void 0),__decorate([i(cc.Label)],e.prototype,"commentLabel",void 0),__decorate([i(cc.Label)],e.prototype,"commentLabel2",void 0),__decorate([i(cc.Label)],e.prototype,"choice1Label",void 0),__decorate([i(cc.Label)],e.prototype,"choice2Label",void 0),__decorate([i(cc.Button)],e.prototype,"choice1Button",void 0),__decorate([i(cc.Button)],e.prototype,"choice2Button",void 0),__decorate([i(cc.Button)],e.prototype,"nextButton",void 0),__decorate([i(cc.Button)],e.prototype,"prevButton",void 0),__decorate([i(cc.Node)],e.prototype,"dialogNode",void 0),__decorate([i(cc.Node)],e.prototype,"dialogLihui",void 0),__decorate([i(cc.Node)],e.prototype,"dialogSpeaker",void 0),__decorate([i(cc.Label)],e.prototype,"dialogLabel",void 0),__decorate([i(cc.Node)],e.prototype,"sealNode",void 0),e=__decorate([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],ChooseUIController:[function(t,e,o){"use strict";cc._RF.push(e,"47b39QANwBAvIJF6QRWP9fv","ChooseUIController"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./UIController"),r=t("./Data"),i=cc._decorator,c=i.ccclass,a=i.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.buttons=[],e.masks=[],e}return __extends(e,t),e.prototype.start=function(){for(var t=0;t<6;++t){var e=null!==r.UserData.value.numbers[t+1];this.buttons[t].interactable=e,this.masks[t].opacity=e?64:192}},e.prototype.onButtonClicked=function(t,e){var o=parseInt(e),i=o/1e3;n.default.initSceneID=o,n.default.initNumber=r.UserData.value.numbers[i],cc.director.loadScene("dialog")},e.prototype.onBackButtonClicked=function(t,e){cc.director.loadScene("main")},__decorate([a([cc.Button])],e.prototype,"buttons",void 0),__decorate([a([cc.Node])],e.prototype,"masks",void 0),e=__decorate([c],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./Data":"Data","./UIController":"UIController"}],Data:[function(t,e,o){"use strict";cc._RF.push(e,"e9415gXMX5Pd4oImTX8+Dqg","Data"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return t.parse=function(t){return t?JSON.parse(t):{}},t}();o.Effect=n;var r=function(){function t(){this.SS=0,this.JS=0,this.NG=0,this.SW=0,this.SS=50,this.JS=100,this.NG=50,this.SW=25}return t.prototype.apply=function(t){this.SS+=t.SS?t.SS:0,this.JS+=t.JS?t.JS:0,this.NG+=t.NG?t.NG:0,this.SW+=t.SW?t.SW:0},t.prototype.getEnding=function(){return this.SS>100?7001:this.SS<=0?7002:this.JS<=0?7003:this.NG>100?7004:this.NG<=0?7005:this.SW<=0?7006:0},t}();o.NumberSystem=r;var i=function(){function t(){this.numbers=[null,new r,null,null,null,null,null]}return t.save=function(){var e=JSON.stringify(t.value);cc.sys.localStorage.setItem("data",e)},t.load=function(){this.value=new t;var e=cc.sys.localStorage.getItem("data");if(e)for(var o=JSON.parse(e),n=0;n<=6;++n)null!==o.numbers[n]&&(this.value.numbers[n]=Object.create(r.prototype),Object.assign(this.value.numbers[n],o.numbers[n]))},t.value=new t,t}();o.UserData=i;var c=function(){return function(){}}();o.ButtonInfo=c;var a=function(){return function(t){if(this.sceneID=parseInt(t.sceneID),this.imageName=t.imageName,this.speaker=t.speaker,this.avatar=t.avatar,this.text=t.text,this.isSceneOver="1"===t.isSceneOver,"1"===t.hasChoice){var e=new c;e.text=t.buttonText1,e.nextSceneID=parseInt(t.nextID1),e.effect=n.parse(t.result1);var o=new c;o.text=t.buttonText2,o.nextSceneID=parseInt(t.nextID2),o.effect=n.parse(t.result2),this.buttons=[e,o]}else this.nextSceneID=parseInt(t.nextID1),this.effect=n.parse(t.result1),this.buttons=[]}}();o.DialogInfo=a;var l=function(){return function(t){this.name=t.name,this.key=t.name,this.init=parseInt(t.init),this.description=t.description,this.highDescription=t.highDescription,this.lowDescription=t.lowDescription,this.highEndID=parseInt(t.highEndID),this.lowEndID=parseInt(t.lowEndID)}}();o.NumberInfo=l;var s=function(){return function(t){this.sceneID=parseInt(t.sceneID),this.imageName=t.imageName,this.speaker=t.speaker,this.text=t.text,this.help=t.help,this.option1=t.option1,this.result1=n.parse(t.result1),this.feedback1=t.feedback1,this.option2=t.option2,this.result2=n.parse(t.result2),this.feedback2=t.feedback2,this.option=""===t.option?null:parseInt(t.option)-1,this.nextID=parseInt(t.nextID)}}();o.ChapterInfo=s;var u=function(){return function(t){this.sceneID=parseInt(t.sceneID),this.imageName=t.imageName,this.question=t.question,this.option1=t.option1,this.option2=t.option2,this.option3=t.option3,this.option4=t.option4,this.result=n.parse(t.result),this.nextID=parseInt(t.nextID)}}();o.QuestionInfo=u;var p=function(){return function(t){this.endID=parseInt(t.endID),this.imageName=t.imageName,this.title=t.title,this.description=t.description,this.hint=t.hint}}();o.EndingInfo=p,cc._RF.pop()},{}],DialogUIController:[function(t,e,o){"use strict";cc._RF.push(e,"c4e81j7Uv5FsqJXjcwSQCNp","DialogUIController"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,r=n.ccclass,i=n.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.buttonGroup=null,e.buttonLabel1=null,e.buttonLabel2=null,e.textLabel=null,e.speakerLabel=null,e.lihuiSprite=null,e.uiController=null,e.dialog=null,e.time=0,e}return __extends(e,t),Object.defineProperty(e.prototype,"showLength",{get:function(){return Math.floor(20*this.time)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isTyping",{get:function(){return this.showLength<this.dialog.text.length},enumerable:!0,configurable:!0}),e.prototype.onGlobalClicked=function(t,e){console.debug("global clicked"),this.isTyping?this.time=1e5:null!=this.dialog.nextSceneID&&this.uiController.goNext(0)},e.prototype.onButtonClicked=function(t,e){var o=parseInt(e);console.debug("button "+o+" clicked"),this.uiController.goNext(o)},e.prototype.update=function(t){this.time+=t,null!==this.dialog&&(this.textLabel.string="<color=black>"+this.dialog.text.substr(0,this.showLength)+"</color>",this.buttonGroup.active=this.dialog.buttons.length>=2&&!this.isTyping)},e.prototype.updateUI=function(t){this.dialog=t;var e=t.sceneID%1e3==0;this.node.active=!e,this.buttonGroup.active=!1,t.buttons.length>=2&&(this.buttonLabel1.string=t.buttons[0].text,this.buttonLabel2.string=t.buttons[1].text),this.time=e?1e5:0,this.textLabel.string="",this.speakerLabel.string=t.speaker,this.updateLihui(t.avatar)},e.prototype.updateLihui=function(t){var e=this,o="\u7acb\u7ed8/"+t;cc.loader.loadRes(o,cc.SpriteFrame,function(t,o){t?e.lihuiSprite.node.active=!1:(e.lihuiSprite.node.active=!0,e.lihuiSprite.spriteFrame=o)})},__decorate([i(cc.Node)],e.prototype,"buttonGroup",void 0),__decorate([i(cc.Label)],e.prototype,"buttonLabel1",void 0),__decorate([i(cc.Label)],e.prototype,"buttonLabel2",void 0),__decorate([i(cc.RichText)],e.prototype,"textLabel",void 0),__decorate([i(cc.Label)],e.prototype,"speakerLabel",void 0),__decorate([i(cc.Sprite)],e.prototype,"lihuiSprite",void 0),e=__decorate([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],EndingUIController:[function(t,e,o){"use strict";cc._RF.push(e,"dadd9IvJyNPPbtgYLcm1ojH","EndingUIController"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./UIController"),r=t("./Data"),i=cc._decorator,c=i.ccclass,a=i.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cgSprite=null,e.titleLabel=null,e.descLabel=null,e.hintLabel=null,e.retryNode=null,e.returnNode=null,e.maskNode=null,e.time=0,e.typing=!1,e}var o;return __extends(e,t),o=e,Object.defineProperty(e.prototype,"showLength",{get:function(){return Math.floor(20*this.time)},enumerable:!0,configurable:!0}),e.prototype.start=function(){var t=this,e=o.ending;this.titleLabel.string="\u7ed3\u5c40\uff1a"+e.title,this.descLabel.string="",this.hintLabel.string="\u63d0\u793a\uff1a"+e.hint,this.retryNode.active=7e3!==e.endID,this.cgSprite.spriteFrame=null;var n="CG/"+e.imageName;cc.loader.loadRes(n,cc.SpriteFrame,function(e,o){if(e)throw"failed to load image";t.cgSprite.spriteFrame=o}),this.runAction1()},e.prototype.runAction1=function(){var t=this;this.maskNode.opacity=0,this.maskNode.runAction(cc.sequence(cc.delayTime(1),cc.fadeTo(2,128))),this.titleLabel.node.opacity=0,this.titleLabel.node.runAction(cc.sequence(cc.delayTime(1),cc.fadeIn(2),cc.callFunc(function(){t.time=0,t.typing=!0}))),this.retryNode.opacity=0,this.returnNode.opacity=0,this.hintLabel.node.opacity=0},e.prototype.update=function(t){if(this.typing){var e=o.ending;this.time+=t,this.descLabel.string=e.description.substr(0,this.showLength),this.showLength>=e.description.length&&(this.typing=!1,this.runAction2(7e3!==e.endID))}},e.prototype.runAction2=function(t){var e=cc.sequence(cc.delayTime(1),cc.fadeIn(.5));t&&this.retryNode.runAction(e.clone()),this.returnNode.runAction(e.clone()),this.hintLabel.node.runAction(e.clone())},e.prototype.onRetryButtonClicked=function(t,e){var i=Math.floor(o.lastSceneID/1e3),c=1e3*i;n.default.initNumber=r.UserData.value.numbers[i],n.default.initSceneID=c,cc.director.loadScene("dialog")},e.prototype.onMainButtonClicked=function(t,e){cc.director.loadScene("main")},e.ending=null,e.lastSceneID=0,__decorate([a(cc.Sprite)],e.prototype,"cgSprite",void 0),__decorate([a(cc.Label)],e.prototype,"titleLabel",void 0),__decorate([a(cc.Label)],e.prototype,"descLabel",void 0),__decorate([a(cc.Label)],e.prototype,"hintLabel",void 0),__decorate([a(cc.Node)],e.prototype,"retryNode",void 0),__decorate([a(cc.Node)],e.prototype,"returnNode",void 0),__decorate([a(cc.Node)],e.prototype,"maskNode",void 0),e=o=__decorate([c],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./Data":"Data","./UIController":"UIController"}],GalleryUIController:[function(t,e,o){"use strict";cc._RF.push(e,"32aa0V9zTlG9aI0nSZH+HBG","GalleryUIController"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,r=n.ccclass,i=n.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cgSprite=null,e.nameLabel=null,e.names="\u4e09\u7687\u5b50\u51fa\u751f,\u540e\u91d1,\u6768\u5e94\u9f99\u8bf7\u7f6a,\u4e24\u4e2a\u592a\u540e,\u5916\u65cf\u653b\u57ce,\u67b6\u7a7a\u7687\u5e1d,\u4e66\u623f\u51af\u4fdd,\u5927\u5b66\u58eb\u8bf7\u8f9e,\u6b66\u5b98\u65e9\u671d,\u4e66\u623f\u5355\u4eba,\u5b81\u590f\u6295\u964d,\u6c47\u62a5\u6218\u51b5,\u4e66\u623f\u5f20\u5c45\u6b63,\u5c1a\u4e66\u4e0e\u90ce\u4e2d,\u6c5f\u5357\u548c\u6c5f\u5317,\u4e66\u623f\u7533\u65f6\u884c,\u5f20\u5c45\u6b63\u54ed\u8bc9,\u70e7\u6bc1\u502d\u8239,\u4e66\u623f\u9526\u8863\u536b,\u6218\u672f\u8ba8\u8bba,\u767b\u57fa,\u4e89\u6267,\u62e5\u7acb\u4eb2\u738b,\u7687\u5e1d\u4e0e\u592a\u540e,\u4e94\u76f4\u81e3\u4f20\u5355,\u6536\u7cae,\u77e5\u5e9c\u4e0e\u901a\u5224,\u519c\u6c11,\u6574\u6cbb\u9ad8\u62f1,\u7a0e\u6536\u4ed3\u5e93,\u519c\u6c11\u8d77\u4e49,\u6587\u5b98\u65e9\u671d,\u82b1\u5929\u9152\u5730,\u51af\u4fdd\u5e55\u50da,\u65e9\u671d,\u884c\u8d3f,\u51fb\u8d25\u6768\u5e94\u9f99,\u660e\u5b9a\u9675".split(","),e.currentIdx=0,e}return __extends(e,t),e.prototype.start=function(){this.updateUI()},e.prototype.onLeftButtonClicked=function(t,e){var o=this.names.length;this.currentIdx=(this.currentIdx+o-1)%o,this.updateUI()},e.prototype.onRightButtonClicked=function(t,e){var o=this.names.length;this.currentIdx=(this.currentIdx+o+1)%o,this.updateUI()},e.prototype.onBackButtonClicked=function(t,e){cc.director.loadScene("main")},e.prototype.updateUI=function(){var t=this,e=this.names[this.currentIdx],o="CG/"+e;cc.loader.loadRes(o,cc.SpriteFrame,function(e,o){t.cgSprite.spriteFrame=o}),this.nameLabel.string=e},__decorate([i(cc.Sprite)],e.prototype,"cgSprite",void 0),__decorate([i(cc.Label)],e.prototype,"nameLabel",void 0),e=__decorate([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],Game:[function(t,e,o){"use strict";cc._RF.push(e,"2290c52ittLRLxmckeAza0T","Game"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./Data"),r=function(){function t(e,o,r,i,c){this.scenes={},this.lastID=0,this.currentID=t.INIT_SCENE_ID,this.numbers=new n.NumberSystem;for(var a=0,l=e;a<l.length;a++){var s=l[a],u=new n.DialogInfo(s);this.scenes[u.sceneID]=u}for(var p=0,h=o;p<h.length;p++){s=h[p],u=new n.ChapterInfo(s);this.scenes[u.sceneID]=u}for(var d=0,f=r;d<f.length;d++){s=f[d],u=new n.QuestionInfo(s);this.scenes[u.sceneID]=u}for(var g=0,_=c;g<_.length;g++){s=_[g],u=new n.EndingInfo(s);this.scenes[u.endID]=u}console.log(this.scenes)}return t.prototype.reset=function(){this.lastID=0,this.currentID=t.INIT_SCENE_ID},t.prototype.get=function(){return this.scenes[this.currentID]},t.prototype.goNext=function(t){var e=this.get();if(e instanceof n.DialogInfo)if(null==e.nextSceneID){var o=e.buttons[t];this.numbers.apply(o.effect),this.goTo(o.nextSceneID)}else this.numbers.apply(e.effect),this.goTo(e.nextSceneID);else if(e instanceof n.ChapterInfo){var r=0===t?e.result1:e.result2;this.numbers.apply(r),this.goTo(e.nextID)}else e instanceof n.QuestionInfo&&(0===t&&this.numbers.apply(e.result),this.goTo(e.nextID));var i=this.numbers.getEnding();0!==i&&this.goTo(i)},t.prototype.goTo=function(t){if(this.lastID=this.currentID,this.currentID=t,console.debug("goto: "+this.currentID),!(this.currentID in this.scenes))throw"invalid scene ID "+this.currentID},t.INIT_SCENE_ID=1e3,t}();o.default=r,cc._RF.pop()},{"./Data":"Data"}],MainUIController:[function(t,e,o){"use strict";cc._RF.push(e,"5ff50w72xhBzppiIwG0aqPJ","MainUIController"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./Data"),r=cc._decorator,i=r.ccclass,c=r.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bgm=null,e}var o;return __extends(e,t),o=e,e.prototype.start=function(){o.loaded||(cc.game.setFrameRate(30),n.UserData.load(),cc.audioEngine.play(this.bgm,!0,.5),o.loaded=!0)},e.prototype.onButtonClicked=function(t,e){var o=e;cc.director.loadScene(o)},e.loaded=!1,__decorate([c(cc.AudioClip)],e.prototype,"bgm",void 0),e=o=__decorate([i],e)}(cc.Component);o.default=a,cc._RF.pop()},{"./Data":"Data"}],MenuUIController:[function(t,e,o){"use strict";cc._RF.push(e,"23343L3QfNAqozYdAGLAc1+","MenuUIController"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,r=n.ccclass,i=(n.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onMenuButtonClicked=function(t,e){this.node.active=!0},e.prototype.onResumeButtomClicked=function(t,e){this.node.active=!1},e.prototype.onReturnButtonClicked=function(t,e){cc.director.loadScene("main")},e.prototype.onLoadButtonClicked=function(t,e){cc.director.loadScene("chapter")},e=__decorate([r],e)}(cc.Component));o.default=i,cc._RF.pop()},{}],NumberUIController:[function(t,e,o){"use strict";cc._RF.push(e,"b1612R4IMtPJ7mOKUq0MDXw","NumberUIController"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,r=n.ccclass,i=n.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ssMask=null,e.jsMask=null,e.ngMask=null,e.swMask=null,e}return __extends(e,t),e.prototype.updateUI=function(t){this.ssMask.height=this.calcMaskHeight(t.SS),this.jsMask.height=this.calcMaskHeight(t.JS),this.ngMask.height=this.calcMaskHeight(t.NG),this.swMask.height=this.calcMaskHeight(t.SW)},e.prototype.calcMaskHeight=function(t){return 0+100*t/100},e.prototype.onChaozhengButtonClicked=function(t,e){this.node.active=!0},e.prototype.onGlobalClicked=function(t,e){this.node.active=!1},__decorate([i(cc.Node)],e.prototype,"ssMask",void 0),__decorate([i(cc.Node)],e.prototype,"jsMask",void 0),__decorate([i(cc.Node)],e.prototype,"ngMask",void 0),__decorate([i(cc.Node)],e.prototype,"swMask",void 0),e=__decorate([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],QuestionUIController:[function(t,e,o){"use strict";cc._RF.push(e,"3817c4X4zBKMIYYw8d2FuoA","QuestionUIController"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,r=n.ccclass,i=n.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.textLabel=null,e.choiceLabels=[],e.choiceButtons=[],e.resultSprites=[],e.rightSprite=null,e.wrongSprite=null,e.uiController=null,e}return __extends(e,t),e.prototype.activate=function(t){this.node.active=!0,this.question=t;var e=[t.option1,t.option2,t.option3,t.option4];this.reorder=[0,1,2,3],function(t){for(var e,o=t.length-1;o>0;o--){var n=Math.floor(Math.random()*(o+1));e=[t[n],t[o]],t[o]=e[0],t[n]=e[1]}}(this.reorder),this.textLabel.string=t.question;for(var o=0;o<4;++o)this.choiceLabels[o].string=e[this.reorder[o]],this.choiceButtons[o].interactable=!0,this.resultSprites[o].spriteFrame=null;this.chose=!1},e.prototype.onButtonClicked=function(t,e){if(!this.chose){for(var o=parseInt(e),n=this.reorder[o],r=0;r<4;++r)this.choiceButtons[r].interactable=!1;this.resultSprites[o].spriteFrame=this.wrongSprite,this.resultSprites[this.reorder.indexOf(0)].spriteFrame=this.rightSprite,this.chose=!0,this.uiController.choose(n)}},e.prototype.onGlobalClicked=function(t,e){this.chose&&this.uiController.updateUI()},e.prototype.exit=function(){this.node.active=!1},__decorate([i(cc.Label)],e.prototype,"textLabel",void 0),__decorate([i([cc.Label])],e.prototype,"choiceLabels",void 0),__decorate([i([cc.Button])],e.prototype,"choiceButtons",void 0),__decorate([i([cc.Sprite])],e.prototype,"resultSprites",void 0),__decorate([i(cc.SpriteFrame)],e.prototype,"rightSprite",void 0),__decorate([i(cc.SpriteFrame)],e.prototype,"wrongSprite",void 0),e=__decorate([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],TableData:[function(t,e,o){"use strict";cc._RF.push(e,"7183b1N+FBHvLWoDG/+jwr2","TableData"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){return function(){}}();o.RawDialogInfo=n;var r=function(){return function(){}}();o.RawNumberInfo=r;var i=function(){return function(){}}();o.RawEndingInfo=i;var c=function(){return function(){}}();o.RawChapterInfo=c;var a=function(){return function(){}}();o.RawQuestionInfo=a,cc._RF.pop()},{}],TitleUIController:[function(t,e,o){"use strict";cc._RF.push(e,"3a2c8qND9pDKqisUmPvVHhc","TitleUIController"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,r=n.ccclass,i=n.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.numLabel=null,e.titleLabel=null,e}return __extends(e,t),e.prototype.activate=function(t){var e=this;this.numLabel.string=t.text.split("\u2014\u2014")[0],this.titleLabel.string=t.text.split("\u2014\u2014")[1],this.node.active=!0,this.node.opacity=255,this.node.runAction(cc.sequence(cc.delayTime(3),cc.fadeOut(1),cc.callFunc(function(){return e.node.active=!1})))},__decorate([i(cc.Label)],e.prototype,"numLabel",void 0),__decorate([i(cc.Label)],e.prototype,"titleLabel",void 0),e=__decorate([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],UIController:[function(t,e,o){"use strict";cc._RF.push(e,"e1b90/rohdEk4SdmmEZANaD","UIController"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./Game"),r=t("./NumberUIController"),i=t("./ChapterUIController"),c=t("./DialogUIController"),a=t("./QuestionUIController"),l=t("./EndingUIController"),s=t("./TitleUIController"),u=t("./Utils"),p=t("./Data"),h=cc._decorator,d=h.ccclass,f=h.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cgSprite=null,e.lastCGSprite=null,e.defaultCG=null,e.numberUIController=null,e.chapterUIController=null,e.dialogUIController=null,e.questionUIController=null,e.titleUIController=null,e.dialogData=null,e.chapterData=null,e.questionData=null,e.numberData=null,e.endingData=null,e.debugSceneID=null,e.transitionNode=null,e.gameManager=null,e}var o;return __extends(e,t),o=e,e.prototype.start=function(){this.dialogUIController.uiController=this,this.chapterUIController.uiController=this,this.questionUIController.uiController=this;var t=u.CSVToDicts(this.dialogData.text),e=u.CSVToDicts(this.chapterData.text),r=u.CSVToDicts(this.questionData.text),i=u.CSVToDicts(this.numberData.text),c=u.CSVToDicts(this.endingData.text);this.gameManager=new n.default(t,e,r,i,c),this.gameManager.goTo(o.initSceneID),this.gameManager.numbers=o.initNumber,o.initSceneID=n.default.INIT_SCENE_ID,o.initNumber=new p.NumberSystem,this.updateUI()},e.prototype.choose=function(t){this.gameManager.goNext(t),this.numberUIController.updateUI(this.gameManager.numbers)},e.prototype.goNext=function(t){var e=this,o=this.gameManager.get();this.gameManager.goNext(t);var n=this.gameManager.get(),r=o.imageName!==n.imageName&&o instanceof p.DialogInfo&&n instanceof p.DialogInfo;if(this.updateUI(),r){this.lastCGSprite.spriteFrame=this.cgSprite.spriteFrame;var i=this.dialogUIController.node.active;this.dialogUIController.node.active=!1;var c=this.titleUIController.node.active;this.titleUIController.node.active=!1,this.transitionNode.active=!0,this.transitionNode.runAction(cc.sequence(cc.fadeIn(1),cc.callFunc(function(){e.lastCGSprite.spriteFrame=null,e.titleUIController.node.active=c}),cc.fadeOut(1),cc.callFunc(function(){e.transitionNode.active=!1,e.dialogUIController.node.active=i})))}},e.prototype.goTo=function(t){this.gameManager.goTo(t),this.updateUI()},e.prototype.onDebugSceneIDEntered=function(t,e){console.debug("debug scene ID entered");var o=parseInt(t.string);this.goTo(o)},e.prototype.updateUI=function(){var t=this.gameManager.get();if(this.debugSceneID.string=this.gameManager.currentID.toString(),t instanceof p.DialogInfo){if(this.gameManager.currentID%1e3==0){this.titleUIController.activate(t);var e=this.gameManager.currentID/1e3;p.UserData.value.numbers[e]=this.gameManager.numbers,p.UserData.save()}this.dialogUIController.updateUI(t),this.chapterUIController.exit(),this.questionUIController.exit(),this.updateCG(t.imageName)}else t instanceof p.ChapterInfo?this.chapterUIController.activate(t):t instanceof p.QuestionInfo?this.questionUIController.activate(t):t instanceof p.EndingInfo&&(l.default.ending=t,l.default.lastSceneID=this.gameManager.lastID,cc.director.loadScene("ending"));this.numberUIController.updateUI(this.gameManager.numbers)},e.prototype.updateCG=function(t){var e=this,o="CG/"+t;cc.loader.loadRes(o,cc.SpriteFrame,function(t,o){t&&(o=e.defaultCG),e.cgSprite.spriteFrame=o})},e.initSceneID=n.default.INIT_SCENE_ID,e.initNumber=new p.NumberSystem,__decorate([f(cc.Sprite)],e.prototype,"cgSprite",void 0),__decorate([f(cc.Sprite)],e.prototype,"lastCGSprite",void 0),__decorate([f(cc.SpriteFrame)],e.prototype,"defaultCG",void 0),__decorate([f(r.default)],e.prototype,"numberUIController",void 0),__decorate([f(i.default)],e.prototype,"chapterUIController",void 0),__decorate([f(c.default)],e.prototype,"dialogUIController",void 0),__decorate([f(a.default)],e.prototype,"questionUIController",void 0),__decorate([f(s.default)],e.prototype,"titleUIController",void 0),__decorate([f(cc.TextAsset)],e.prototype,"dialogData",void 0),__decorate([f(cc.TextAsset)],e.prototype,"chapterData",void 0),__decorate([f(cc.TextAsset)],e.prototype,"questionData",void 0),__decorate([f(cc.TextAsset)],e.prototype,"numberData",void 0),__decorate([f(cc.TextAsset)],e.prototype,"endingData",void 0),__decorate([f(cc.EditBox)],e.prototype,"debugSceneID",void 0),__decorate([f(cc.Node)],e.prototype,"transitionNode",void 0),e=o=__decorate([d],e)}(cc.Component);o.default=g,cc._RF.pop()},{"./ChapterUIController":"ChapterUIController","./Data":"Data","./DialogUIController":"DialogUIController","./EndingUIController":"EndingUIController","./Game":"Game","./NumberUIController":"NumberUIController","./QuestionUIController":"QuestionUIController","./TitleUIController":"TitleUIController","./Utils":"Utils"}],Utils:[function(t,e,o){"use strict";function n(t){for(var e=new RegExp('(\\,|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\,\\r\\n]*))',"gi"),o=[[]],n=null;n=e.exec(t);){var r,i=n[1];i.length&&","!==i&&o.push([]),r=n[2]?n[2].replace(new RegExp('""',"g"),'"'):n[3],o[o.length-1].push(r)}return o}cc._RF.push(e,"e741249OhNJd60nilFmhcSb","Utils"),Object.defineProperty(o,"__esModule",{value:!0}),o.CSVToArray=n,o.CSVToDicts=function(t){for(var e=n(t),o=e[1],r=[],i=function(t){var n={},i=e[t];o.forEach(function(t,e){return n[t]=i[e]}),r.push(n)},c=3;c<e.length;++c)i(c);return r},cc._RF.pop()},{}]},{},["AboutUIController","ChapterUIController","ChooseUIController","Data","DialogUIController","EndingUIController","GalleryUIController","Game","MainUIController","MenuUIController","NumberUIController","QuestionUIController","TableData","TitleUIController","UIController","Utils"]);